# Polygon NFT Collection - Complete ERC-721 Implementation A comprehensive NFT smart contract demonstrating advanced blockchain development on Polygon, featuring minting mechanics, whitelist systems, royalties, and gas optimization. ## What You'll Learn - ERC-721 Standard: Complete NFT implementation - Polygon Development: Low-cost, high-speed blockchain - Advanced Features: Whitelist, royalties, enumeration - Gas Optimization: Efficient smart contract patterns - Metadata Management: IPFS integration and standards - Access Control: Owner permissions and security - Marketplace Integration: OpenSea compatibility ## Key Features ### Advanced Minting System - Public minting with quantity limits - Whitelist minting with discounts - Owner minting for airdrops - Supply cap and wallet limits - Automatic refund for overpayment ### Built-in Royalty System (EIP-2981) - Configurable royalty percentage - Automatic marketplace integration - Creator revenue protection ### Security & Access Control - Owner-only administrative functions - Reentrancy protection - Input validation and sanitization - Safe transfer mechanisms ### Gas Optimization - Efficient storage patterns - Batch operations support - Minimal external calls - Optimized loop structures ## Prerequisites - Node.js (v18+ recommended) - MetaMask wallet - Basic Solidity knowledge - MATIC tokens for deployment (free on Mumbai testnet) ## Setup Instructions ### 1. Install Dependencies ```bash cd polygon-nft npm install ``` ### 2. Environment Configuration Create `.env` file: ```bash # Polygon RPC URLs MUMBAI_RPC_URL=https://rpc-mumbai.maticvigil.com/ POLYGON_RPC_URL=https://polygon-rpc.com/ # Your wallet private key (NEVER share this!) PRIVATE_KEY=your_private_key_here # API keys for verification POLYGONSCAN_API_KEY=your_polygonscan_api_key COINMARKETCAP_API_KEY=your_coinmarketcap_api_key ``` ### 3. Get Free MATIC (Mumbai Testnet) ```bash # Visit the Polygon faucet https://faucet.polygon.technology/ ``` ### 4. Compile Contract ```bash npm run compile ``` ### 5. Deploy to Mumbai Testnet ```bash npm run deploy:mumbai ``` ### 6. Mint Your First NFT ```bash # Update CONTRACT_ADDRESS in scripts/mint.js npm run mint ``` ### 7. Deploy to Polygon Mainnet (Optional) ```bash npm run deploy:polygon ``` ## Project Structure ``` polygon-nft/ contracts/ LearnNFT.sol # Main NFT contract scripts/ deploy.js # Deployment script mint.js # Minting and interaction script test/ LearnNFT.test.js # Comprehensive test suite metadata/ genesis.json # Genesis NFT metadata 1.json # Sample NFT metadata hardhat.config.js # Hardhat configuration package.json # Dependencies and scripts ``` ## Contract Features Breakdown ### Minting Functions #### Owner Mint ```solidity function ownerMint(address to, uint256 quantity, string[] memory tokenURIs) ``` - Admin-only minting for airdrops - Custom metadata per token - No payment required #### Public Mint ```solidity function publicMint(uint256 quantity) payable ``` - Open to everyone (when enabled) - 1-5 NFTs per transaction - Automatic refund for overpayment #### Whitelist Mint ```solidity function whitelistMint(uint256 quantity) payable ``` - Early access for whitelisted addresses - 50% discount on mint price - 1-3 NFTs per transaction ### Management Functions ```solidity // Toggle mint phases function togglePublicMint() function toggleWhitelistMint() // Update pricing function setMintPrice(uint256 newPrice) // Manage whitelist function updateWhitelist(address[] calldata addresses, bool status) // Update metadata function setBaseURI(string memory newBaseURI) // Withdraw funds function withdraw(address payable to) ``` ### Royalty System ```solidity function royaltyInfo(uint256 tokenId, uint256 salePrice) returns (address receiver, uint256 royaltyAmount) ``` - EIP-2981 compliant - Configurable percentage (default 7.5%) - Automatic marketplace integration ## Testing Run comprehensive test suite: ```bash npm run test ``` Test coverage includes: - Minting mechanics and limits - Access control and permissions - Royalty calculations - Metadata management - Security vulnerabilities - Gas optimization verification - Edge cases and error conditions ## Polygon vs Ethereum Comparison | Feature | Ethereum | Polygon | |---------|----------|---------| | Transaction Cost | $20-100+ | $0.01-0.10 | | Block Time | ~12 seconds | ~2 seconds | | TPS | ~15 | ~7,000 | | Finality | ~6 minutes | ~10 seconds | | Developer Experience | Same tools | Same tools | | Security | Highest | Very High | ## OpenSea Integration Your NFTs automatically appear on OpenSea: ### Mumbai Testnet ``` https://testnets.opensea.io/assets/mumbai/{CONTRACT_ADDRESS}/{TOKEN_ID} ``` ### Polygon Mainnet ``` https://opensea.io/assets/matic/{CONTRACT_ADDRESS}/{TOKEN_ID} ``` ## Metadata Standards ### Required Fields ```json { "name": "NFT Name", "description": "NFT Description", "image": "https://..../image.png" } ``` ### Enhanced Fields ```json { "external_url": "https://yourproject.com", "animation_url": "https://..../animation.mp4", "attributes": [ { "trait_type": "Rarity", "value": "Rare" }, { "trait_type": "Power", "value": 85, "display_type": "boost_percentage" } ] } ``` ## Advanced Patterns Demonstrated ### 1. Efficient Enumeration ```solidity function tokensOfOwner(address owner) external view returns (uint256[] memory) ``` ### 2. Batch Operations ```solidity function updateWhitelist(address[] calldata addresses, bool status) ``` ### 3. Safe Mathematics ```solidity // Built-in overflow protection in Solidity 0.8+ counter += quantity; ``` ### 4. Reentrancy Protection ```solidity modifier nonReentrant { require(_status != _ENTERED); _status = _ENTERED; _; _status = _NOT_ENTERED; } ``` ## Common Deployment Issues & Solutions ### Issue: "Insufficient funds" Solution: Get free MATIC from Mumbai faucet ### Issue: "Contract not verified" Solution: Set POLYGONSCAN_API_KEY in .env ### Issue: "Whitelist mint failed" Solution: Add your address to whitelist first ### Issue: "OpenSea not showing NFTs" Solution: Wait 24-48h or manually import contract ## Gas Optimization Tips 1. Batch Operations: Use arrays for multiple updates 2. Pack Structs: Order variables by size 3. Use Events: Instead of storing non-critical data 4. Limit Loops: Avoid unbounded iterations 5. Cache Storage: Read once, use multiple times ## Extension Ideas ### 1. Dynamic NFTs - Traits that change over time - Level progression systems - Seasonal updates ### 2. Utility Features - Staking for rewards - Breeding mechanisms - Governance voting rights ### 3. Marketplace Features - Built-in trading - Auction systems - Fractional ownership ### 4. Cross-Chain - Bridge to other networks - Multi-chain metadata - Interoperability protocols ## Real-World Metrics Deployment Costs: - Mumbai: ~$0.01 - Polygon: ~$0.50-2.00 - Ethereum: ~$50-200 Minting Costs: - Mumbai: ~$0.001 - Polygon: ~$0.01-0.05 - Ethereum: ~$20-100 ## Additional Resources - [Polygon Documentation](https://docs.polygon.technology/) - [OpenZeppelin Contracts](https://docs.openzeppelin.com/contracts/) - [EIP-721 Standard](https://eips.ethereum.org/EIPS/eip-721) - [EIP-2981 Royalties](https://eips.ethereum.org/EIPS/eip-2981) - [OpenSea Metadata Standards](https://docs.opensea.io/docs/metadata-standards) ## Job-Ready Skills Covered - Advanced Solidity programming - ERC-721 implementation and extensions - Gas optimization techniques - Security best practices - Polygon/Layer 2 development - NFT marketplace integration - Metadata and IPFS management - Testing and deployment automation - Royalty and creator economy systems  This project demonstrates production-ready NFT development skills essential for blockchain developer roles!